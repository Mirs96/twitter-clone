<div class="registerContainer">
    <h2>Create your account</h2>
    <form (ngSubmit)="onSubmit()" [formGroup]="registerForm" class="registerForm">
        
        <div class="formGroup">
          <label for="firstname">First Name</label>
          <input type="text" id="firstname" formControlName="firstname" [class.inputError]="registerForm.get('firstname')?.invalid && registerForm.get('firstname')?.touched">
          @if (registerForm.get('firstname')?.invalid && registerForm.get('firstname')?.touched) {
              <span class="validationMessage">
                  @if (registerForm.get('firstname')?.errors?.['required']) {
                      Please enter your first name
                  }
                  @if (registerForm.get('firstname')?.errors?.['minlength']) {
                      At least 3 characters please
                  }
              </span>
          }
        </div>

         <div class="formGroup">
          <label for="lastname">Last Name</label>
          <input type="text" id="lastname" formControlName="lastname" [class.inputError]="registerForm.get('lastname')?.invalid && registerForm.get('lastname')?.touched">
           @if (registerForm.get('lastname')?.invalid && registerForm.get('lastname')?.touched) {
              <span class="validationMessage">
                  @if (registerForm.get('lastname')?.errors?.['required']) {
                       Your last name is important too!
                  }
                  @if (registerForm.get('lastname')?.errors?.['minlength']) {
                      3 characters minimum
                  }
              </span>
          }
        </div>
        
         <div class="formGroup">
          <label for="nickname">Nickname</label>
          <input type="text" id="nickname" formControlName="nickname" [class.inputError]="registerForm.get('nickname')?.invalid && registerForm.get('nickname')?.touched">
          @if (registerForm.get('nickname')?.invalid && registerForm.get('nickname')?.touched) {
              <span class="validationMessage">
                  @if (registerForm.get('nickname')?.errors?.['required']) {
                      How should we call you?
                  }
                  @if (registerForm.get('nickname')?.errors?.['minlength']) {
                      Make it at least 3 characters
                  }
              </span>
          }
        </div>

        <div class="formGroup">
            <label for="dob">Date of Birth</label>
            <input type="date" id="dob" formControlName="dob" [class.inputError]="registerForm.get('dob')?.invalid && registerForm.get('dob')?.touched">
             @if (registerForm.get('dob')?.invalid && registerForm.get('dob')?.touched && registerForm.get('dob')?.errors?.['required']) {
                <span class="validationMessage">We need to know your birthday!</span>
            }
        </div>

        <div class="formGroup">
            <label for="sex">Sex</label>
            <select id="sex" formControlName="sex" [class.inputError]="registerForm.get('sex')?.invalid && registerForm.get('sex')?.touched">
                <option value="">Select...</option>
                <option value="M">Man</option>
                <option value="F">Woman</option>
                <option value="O">Other</option>
            </select>
            @if (registerForm.get('sex')?.invalid && registerForm.get('sex')?.touched && registerForm.get('sex')?.errors?.['required']) {
                <span class="validationMessage">Please select your gender</span>
            }
        </div>

        <div class="formGroup">
          <label for="email">Email</label>
          <input type="email" id="email" formControlName="email" [class.inputError]="registerForm.get('email')?.invalid && registerForm.get('email')?.touched">
          @if (registerForm.get('email')?.invalid && registerForm.get('email')?.touched) {
              <span class="validationMessage">
                  @if (registerForm.get('email')?.errors?.['required']) {
                      Email is required
                  }
                  @if (registerForm.get('email')?.errors?.['email']) {
                      Please enter a valid email
                  }
              </span>
          }
        </div>

         <div class="formGroup">
          <label for="password">Password</label>
          <input type="password" id="password" formControlName="password" [class.inputError]="registerForm.get('password')?.invalid && registerForm.get('password')?.touched">
          @if (registerForm.get('password')?.invalid && registerForm.get('password')?.touched) {
              <span class="validationMessage">
                  @if (registerForm.get('password')?.errors?.['required']) {
                      Password is required
                  }
                  @if (registerForm.get('password')?.errors?.['minlength']) {
                      At least 8 characters please
                  }
              </span>
          }
        </div>

        <div class="formGroup">
            <label for="phone">Phone</label>
            <input type="tel" id="phone" formControlName="phone" [class.inputError]="registerForm.get('phone')?.invalid && registerForm.get('phone')?.touched">
            @if (registerForm.get('phone')?.invalid && registerForm.get('phone')?.touched) {
              <span class="validationMessage">
                  @if (registerForm.get('phone')?.errors?.['required']) {
                      Phone number is required
                  }
                  @if (registerForm.get('phone')?.errors?.['minlength']) {
                      At least 10 digits please
                  }
              </span>
          }
        </div>

        <div class="formGroup">
            <label for="role">Role</label>
            <select id="role" formControlName="role" [class.inputError]="registerForm.get('role')?.invalid && registerForm.get('role')?.touched">
                <option value="">Select...</option>
                <option value="ADMIN">Admin</option>
                <option value="USER">User</option>
                <option value="MANAGER">Manager</option>
            </select>
            @if (registerForm.get('role')?.invalid && registerForm.get('role')?.touched && registerForm.get('role')?.errors?.['required']) {
                <span class="validationMessage">Please select a role</span>
            }
        </div>

         <div class="formGroup">
            <label for="profilePicture">Profile Image (Optional)</label>
            <input type="file" id="profilePicture" accept=".jpg, .jpeg, .png" (change)="onFileChange($event)" class="fileInput">
        </div>

         <div class="formGroup">
          <label for="bio">Bio (Optional)</label>
          <textarea id="bio" formControlName="bio" rows="5" placeholder="Tell us a bit about yourself..." [class.inputError]="registerForm.get('bio')?.invalid && registerForm.get('bio')?.touched"></textarea>
          @if (registerForm.get('bio')?.invalid && registerForm.get('bio')?.touched && registerForm.get('bio')?.errors?.['maxlength']) {
            <span class="validationMessage">Bio cannot exceed 500 characters</span>
          }
        </div>

        <button type="submit" [disabled]="!registerForm.valid" class="submitBtn">
          Register
        </button>
    </form>
</div>