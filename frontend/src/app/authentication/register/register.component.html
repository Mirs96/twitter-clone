<div class="register-container">
    <form (ngSubmit)="onSubmit()" [formGroup]="registerForm">
        <!-- Firstname -->
        <div>
            <label for="firstname">Firstname:</label>
            <input type="text" id="firstname" formControlName="firstname" (blur)="onFieldBlur('firstname')">
            @if (registerForm.get('firstname')?.touched && registerForm.get('firstname')?.errors) {
                <div class="validation-message">
                    @if (registerForm.get('firstname')?.errors?.['required']) {
                        <span>âœ¨ Please enter your first name</span>
                    }
                    @if (registerForm.get('firstname')?.errors?.['minlength']) {
                        <span>ðŸŒŸ At least 3 characters please</span>
                    }
                </div>
            }
        </div>

        <!-- Lastname -->
        <div>
            <label for="lastname">Lastname:</label>
            <input type="text" id="lastname" formControlName="lastname" (blur)="onFieldBlur('lastname')">
            @if (registerForm.get('lastname')?.touched && registerForm.get('lastname')?.errors) {
                <div class="validation-message">
                    @if (registerForm.get('lastname')?.errors?.['required']) {
                        <span>âœ¨ Your last name is important too!</span>
                    }
                    @if (registerForm.get('lastname')?.errors?.['minlength']) {
                        <span>ðŸŒŸ 3 characters minimum</span>
                    }
                </div>
            }
        </div>

        <!-- Nickname -->
        <div>
            <label for="nickname">Nickname:</label>
            <input type="text" id="nickname" formControlName="nickname" (blur)="onFieldBlur('nickname')">
            @if (registerForm.get('nickname')?.touched && registerForm.get('nickname')?.errors) {
                <div class="validation-message">
                    @if (registerForm.get('nickname')?.errors?.['required']) {
                        <span>âœ¨ How should we call you?</span>
                    }
                    @if (registerForm.get('nickname')?.errors?.['minlength']) {
                        <span>ðŸŒŸ Make it at least 3 characters</span>
                    }
                </div>
            }
        </div>

        <!-- Date of Birth -->
        <div>
            <label for="dob">Date of Birth:</label>
            <input type="date" id="dob" formControlName="dob" (blur)="onFieldBlur('dob')">
            @if (registerForm.get('dob')?.touched && registerForm.get('dob')?.errors) {
                <div class="validation-message">
                    <span>âœ¨ We need to know your birthday!</span>
                </div>
            }
        </div>

        <!-- Sex -->
        <div>
            <label for="sex">Sex:</label>
            <select id="sex" formControlName="sex" (blur)="onFieldBlur('sex')">
                <option value="">Select...</option>
                <option value="M">man</option>
                <option value="F">woman</option>
                <option value="O">other</option>
            </select>
            @if (registerForm.get('sex')?.touched && registerForm.get('sex')?.errors) {
                <div class="validation-message">
                    <span>âœ¨ Please select your gender</span>
                </div>
            }
        </div>

        <!-- Email -->
        <div>
            <label for="email">Email:</label>
            <input type="email" id="email" formControlName="email" (blur)="onFieldBlur('email')">
            @if (registerForm.get('email')?.touched && registerForm.get('email')?.errors) {
                <div class="validation-message">
                    @if (registerForm.get('email')?.errors?.['required']) {
                        <span>âœ¨ Email is required</span>
                    }
                    @if (registerForm.get('email')?.errors?.['email']) {
                        <span>ðŸŒŸ Please enter a valid email</span>
                    }
                </div>
            }
        </div>

        <!-- Password -->
        <div>
            <label for="password">Password:</label>
            <input type="password" id="password" formControlName="password" (blur)="onFieldBlur('password')">
            @if (registerForm.get('password')?.touched && registerForm.get('password')?.errors) {
                <div class="validation-message">
                    @if (registerForm.get('password')?.errors?.['required']) {
                        <span>âœ¨ Password is required</span>
                    }
                    @if (registerForm.get('password')?.errors?.['minlength']) {
                        <span>ðŸŒŸ At least 8 characters please</span>
                    }
                </div>
            }
        </div>

        <!-- Phone -->
        <div>
            <label for="phone">Phone:</label>
            <input type="tel" id="phone" formControlName="phone" (blur)="onFieldBlur('phone')">
            @if (registerForm.get('phone')?.touched && registerForm.get('phone')?.errors) {
                <div class="validation-message">
                    @if (registerForm.get('phone')?.errors?.['required']) {
                        <span>âœ¨ Phone number is required</span>
                    }
                    @if (registerForm.get('phone')?.errors?.['minlength']) {
                        <span>ðŸŒŸ At least 10 digits please</span>
                    }
                </div>
            }
        </div>

        <!-- Role -->
        <div>
            <label for="role">Role:</label>
            <select id="role" formControlName="role" (blur)="onFieldBlur('role')">
                <option value="">Select...</option>
                <option value="ADMIN">Admin</option>
                <option value="USER">User</option>
                <option value="MANAGER">Manager</option>
            </select>
            @if (registerForm.get('role')?.touched && registerForm.get('role')?.errors) {
                <div class="validation-message">
                    <span>âœ¨ Please select a role</span>
                </div>
            }
        </div>

        <!-- Profile Image -->
        <div>
            <label for="profileImg">Profile Image:</label>
            <input type="file" id="profileImg" accept=".jpg, .jpeg, .png" (change)="onFileChange($event)">
        </div>

        <!-- Bio -->
        <div>
            <label for="bio">Write a bio:</label>
            <textarea id="bio" formControlName="bio" rows="5" maxlength="500" 
                     (blur)="onFieldBlur('bio')" >
            </textarea>
        </div>

        <div>
            <button [disabled]="registerForm.invalid" class="submit-btn">Register</button>
        </div>
    </form>
</div>